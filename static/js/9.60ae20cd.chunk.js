(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[9],{1661:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var n=function(e,t){var r=Math.floor(e);return"".concat(r," ").concat(t).concat(1===r?"":"s")},c=function(e){return 1!==e?"s":""}},1670:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n,c=r(4),a=r.n(c),s=r(15);!function(e){e.ETH="ETH",e.LOOKS="LOOKS",e.MATIC="MATIC"}(n||(n={}));var i=function(){var e=Object(s.a)(a.a.mark((function e(){var t,r,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:n.ETH,e.prev=1,e.next=4,fetch("https://api.coinbase.com/v2/exchange-rates?currency=".concat(t));case 4:return r=e.sent,e.abrupt("return",r.json().then((function(e){return e.data.rates.USD})));case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},1671:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n=function(e){return{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",amount:e,decimals:18,name:"Ethereum",priceInfo:{baseAsset:"ETH",basePrice:e,ETHPrice:e},symbol:"ETH",tokenId:"ETH",tokenType:"ERC20"}}},1672:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(25),c=r(69),a=r(183),s=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=c.a.from(0),i=c.a.from(0),o=e.sellorders[0],u=c.a.from(1).mul(10).pow(18),l=o.ammFeePercent?100*(100+o.ammFeePercent):11e3;if(e.marketplace===a.f.NFTX){var f=c.a.from(1).mul(10).pow(16);s=(s=c.a.from(l).div(100).mul(n+1)).mul(f),i=(i=c.a.from(l).div(100).mul(n)).mul(f)}e.marketplace===a.f.NFT20&&(s=(s=c.a.from(100).mul(n+1)).mul(u),i=(i=c.a.from(100).mul(n)).mul(u));var d=c.a.from(null===(t=o.ethReserves)||void 0===t?void 0:t.toLocaleString("fullwide",{useGrouping:!1})),b=c.a.from(null===(r=o.tokenReserves)||void 0===r?void 0:r.toLocaleString("fullwide",{useGrouping:!1})),g=d.mul(s).mul(1e3),j=b.sub(s).mul(997),w=d.mul(i).mul(1e3),O=b.sub(i).mul(997),p=g.div(j),m=w.div(O);return(p=(p=p.sub(m)).mul(101).div(100)).toString()},i=function(e){if(!e.some((function(e){return e.asset.marketplace===a.f.NFTX||e.asset.marketplace===a.f.NFT20}))||e.every((function(e){return e.status===a.c.REVIEWED||e.status===a.c.REVIEWING_PRICE_CHANGE})))return e;var t=function(e){return e===a.f.NFTX||e===a.f.NFT20},r=Object(n.a)(e),i=r.reduce((function(e,r){var n=r.asset,c=n.marketplace;if(!t(c))return e;var a=n.address+n.marketplace;return Object.keys(e).includes(a)?e[a].push(n.tokenId):e[a]=[n.tokenId],e}),{}),o=r.reduce((function(e,r){var n=r.asset,c=n.marketplace;if(!n.updatedPriceInfo)return e;if(!t(c))return e;var a=n.address+n.marketplace;return Object.keys(e).includes(a)?e[a]=[e[a][0]+1,n]:e[a]=[1,n],e}),{}),u=Object.keys(o).reduce((function(e,t){return e[t]=function(e,t){for(var r=c.a.from(0),n=0;n<t;n++){var a=c.a.from(s(e,n));r=r.add(a)}return r.div(t).toString()}(o[t][1],o[t][0]),e}),{});return r.forEach((function(e){if(t(e.asset.marketplace)){var r=e.asset,n=!!r.updatedPriceInfo,c=n?u[r.address+r.marketplace]:s(r,i[r.address+r.marketplace].indexOf(e.asset.tokenId));n&&e.asset.updatedPriceInfo?e.asset.updatedPriceInfo.ETHPrice=e.asset.updatedPriceInfo.basePrice=c:e.asset.currentEthPrice=e.asset.priceInfo.ETHPrice=c}})),r}},1686:function(e,t,r){},1694:function(e,t,r){"use strict";function n(e,t,r){if(e.has(t))return e.get(t);var n=r&&Array.from(r).reduce((function(e,t){return!(!e&&!(null===t||void 0===t?void 0:t.rarity))}),!1);return n&&e.set(t,n),n}r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var c=function(e,t){return"/nfts/asset/".concat(e.address,"/").concat(e.tokenId).concat(t?"?origin=".concat(t):"")}},1874:function(e,t,r){},1875:function(e,t,r){},1876:function(e,t,r){},1877:function(e,t,r){},1916:function(e,t,r){"use strict";r.r(t);var n,c=r(25),a=r(4),s=r.n(a),i=r(15),o=r(11),u=r(69),l=r(150),f=r(16),d=r(930),b=r(379),g=r(143),j=r(77),w=r(115),O=r(327),p=r(183),m=r(350),h=r(53),z=r(57),x=(r(326),r(497),r(1874),r(0)),v=[p.d.FETCHING_ROUTE,p.d.CONFIRMING_IN_WALLET,p.d.FETCHING_FINAL_ROUTE,p.d.PROCESSING_TRANSACTION],I=function(e){var t=e.balance,r=e.isConnected,n=e.sufficientBalance,c=e.totalEthPrice,a=e.totalUsdPrice,s=e.bagStatus,i=e.fetchAssets,o=e.assetsAreInReview,u=Object(h.s)(),l=Object(h.d)(z.a.WALLET),f=v.includes(s)||l,d=r&&(f||!n||o),I=r&&(!n||s===p.d.WARNING);return Object(x.jsxs)(w.b,{className:"rgw6ez283 rgw6ez2dl rgw6ezvf",children:[I&&Object(x.jsx)(w.c,{className:"m29kpj4 rgw6ez2ir rgw6ez229 rgw6ez691 rgw6ez6al rgw6ez419 rgw6eza9 rgw6ezcl",children:n?"Something went wrong. Please try again.":"Insufficient funds (".concat(Object(m.e)(t.toString())," ETH)")}),Object(x.jsxs)(w.b,{borderTopLeftRadius:I?"0":"12",borderTopRightRadius:I?"0":"12",className:"rgw6ez283 rgw6ez2dl rgw6ez2ir rgw6ez229 rgw6ez4fx rgw6ez479 rgw6ez6c5 rgw6ez6dp",children:[Object(x.jsx)(j.b,{marginBottom:"8",style:{lineHeight:"20px",opacity:"0.54"},className:O.m,children:"Total"}),Object(x.jsxs)(w.b,{marginBottom:"16",children:[Object(x.jsxs)(w.c,{justifyContent:"space-between",children:[Object(x.jsx)(j.b,{className:O.i,children:"".concat(Object(m.e)(c.toString()))}),Object(x.jsxs)(w.c,{className:"m29kpj8 rgw6ez2i3 rgw6ez21l rgw6ez4fx rgw6ez3mx rgw6ez273 rgw6ez2d9 rgw6ezar rgw6ezcl rgw6ez68h",children:[Object(x.jsx)(j.b,{as:"img",src:b.a,alt:"Ethereum",width:"24",height:"24"}),"ETH"]})]}),Object(x.jsx)(j.b,{fontWeight:"normal",style:{lineHeight:"20px",opacity:"0.6"},className:O.c,children:"".concat(Object(m.a)(a,!0))})]}),Object(x.jsxs)(w.c,{as:"button",color:"explicitWhite",className:"m29kpj6 rgw6ezc9 rgw6ezal rgw6ez6jx rgw6ez2ir rgw6ez229 rgw6ez4j3 rgw6ez479 rgw6ez6ex rgw6ez67h rgw6ezcl rgw6ez66d rgw6ez419 rgw6ez3nl",disabled:d,onClick:function(){r?i():u()},children:[f&&Object(x.jsx)(g.a,{size:"20px",stroke:"backgroundSurface"}),!r||l?"Connect wallet":s===p.d.FETCHING_FINAL_ROUTE||s===p.d.CONFIRMING_IN_WALLET?"Proceed in wallet":s===p.d.PROCESSING_TRANSACTION?"Transaction pending":"Pay"]})]})]})},E=r(231),N=r(31),k=r(2),A=Object(k.keyframes)(n||(n=Object(N.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),y=k.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],A,A,(function(e){return e.theme.accentActive})),T=function(){return Object(x.jsx)(j.b,{display:"flex",position:"absolute",children:Object(x.jsx)("svg",{height:"18px",width:"18px",children:Object(x.jsx)(y,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},C=r(138),P=(r(1686),r(1694)),R=r(1),_=r(55),S=(r(1875),"_1kuawc5 rgw6ez47l rgw6ez3ml rgw6ezaf rgw6ezc9"),H="rgw6ez12r rgw6ez193 rgw6ez679",L="_1kuawcf",G=function(){return Object(x.jsx)(j.b,{position:"relative",background:"loadingBackground",className:H,children:Object(x.jsxs)(j.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"grey500",fontSize:"12",fontWeight:"normal",children:["Image",Object(x.jsx)("br",{}),"not",Object(x.jsx)("br",{}),"available"]})})},W=function(e){var t=e.asset,r=e.removeAsset,n=e.showRemove,c=e.grayscale,a=e.isMobile,s=Object(R.useState)(!1),i=Object(o.a)(s,2),u=i[0],l=i[1],f=Object(R.useState)(!1),d=Object(o.a)(f,2),b=d[0],g=d[1],O=Object(R.useState)(!t.smallImageUrl),p=Object(o.a)(O,2),h=p[0],z=p[1],v=function(){return l(!u)},I=Object(R.useRef)(null);return u&&I.current&&!1===I.current.matches(":hover")&&l(!1),Object(x.jsx)(_.b,{to:Object(P.a)(t),style:{textDecoration:"none"},children:Object(x.jsxs)(w.c,{ref:I,className:"_1kuawc1 rgw6ez479 rgw6ez2nl rgw6ez3n9 rgw6ez66d rgw6ez1al rgw6ez67h",onMouseEnter:v,onMouseLeave:v,children:[Object(x.jsxs)(j.b,{position:"relative",display:"flex",children:[Object(x.jsx)(j.b,{display:n?"block":"none",className:"rgw6ez429 rgw6ez343 rgw6ez39l",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(t)},transition:"250",style:{opacity:u||a?"1":"0"},zIndex:"1",children:Object(x.jsx)(C.s,{})}),!h&&Object(x.jsx)(j.b,{as:"img",src:t.smallImageUrl,alt:t.name,className:Object(E.default)(H,c&&!u&&L),onLoad:function(){g(!0)},onError:function(){z(!0)},visibility:b?"visible":"hidden"}),!b&&Object(x.jsx)(j.b,{position:"absolute",className:"".concat(H," ").concat("_2kdvfw1")}),h&&Object(x.jsx)(G,{})]}),Object(x.jsxs)(w.b,{overflow:"hidden",height:"full",justifyContent:"space-between",color:c?"textSecondary":"textPrimary",children:[Object(x.jsxs)(w.b,{children:[Object(x.jsx)(w.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:Object(x.jsx)(j.b,{className:"_1kuawcn rgw6ezaf rgw6ezcl rgw6ez6h1 rgw6ez3zf rgw6ez3z9",children:t.name||t.tokenId})}),Object(x.jsxs)(w.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(x.jsx)(j.b,{className:"_1kuawcp rgw6ezcl rgw6ezaf rgw6ez6jp rgw6ez6h1 rgw6ez3z9 rgw6ez3zf",children:t.collectionName}),t.collectionIsVerified&&Object(x.jsx)(C.tb,{className:"rgw6ez3rl"})]})]}),Object(x.jsx)(w.c,{className:"_1kuawcl rgw6ez3ml rgw6ezal rgw6ezc9",children:"".concat(Object(m.e)(t.updatedPriceInfo?t.updatedPriceInfo.ETHPrice:t.priceInfo.ETHPrice)," ETH")})]})]})})},B=function(e){var t,r=e.asset,n=e.markAssetAsReviewed,c=e.top,a=e.isMobile,s=u.a.from(null===(t=r.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(u.a.from(r.priceInfo.ETHPrice));return Object(x.jsxs)(w.b,{className:"rgw6ez2j3 rgw6ez22l rgw6ez4ir rgw6ez3mx rgw6ez479 rgw6ez66p rgw6ez6fp rgw6ez4rr rgw6ez4y3 rgw6ez1al rgw6ez66d",borderTopColor:c?"backgroundOutline":"transparent",children:[Object(x.jsxs)(w.c,{className:S,children:[s?Object(x.jsx)(C.ib,{}):Object(x.jsx)(C.hb,{}),Object(x.jsx)(j.b,{children:"Price ".concat(s?"increased":"decreased"," from ").concat(Object(m.e)(r.priceInfo.ETHPrice)," ETH")})]}),Object(x.jsx)(W,{asset:r,removeAsset:function(){},isMobile:a}),Object(x.jsxs)(w.c,{gap:"12",justifyContent:"space-between",children:[Object(x.jsx)(j.b,{className:"_1kuawcd _1kuawc9 rgw6ezc9 rgw6ezaf rgw6ez6jt rgw6ez2if rgw6ez21x rgw6ez149 rgw6ez459 rgw6ezcl rgw6ez3zx rgw6ez67h rgw6ez5g3",onClick:function(e){e.preventDefault(),e.stopPropagation(),n(r,!1)},children:"Remove"}),Object(x.jsx)(j.b,{className:"_1kuawcb _1kuawc9 rgw6ezc9 rgw6ezaf rgw6ez6jt rgw6ez2if rgw6ez21x rgw6ez149 rgw6ez459 rgw6ezcl rgw6ez3zx rgw6ez67h rgw6ez5jr",onClick:function(e){e.preventDefault(),e.stopPropagation(),n(r,!0)},children:"Keep"})]})]})},F=function(e){var t=e.assets;return Object(x.jsx)(w.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,r){return Object(x.jsx)(j.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t.length-r},className:L},"preview".concat(r))}))})},U=function(e){var t=e.assets,r=e.clearUnavailableAssets,n=e.didOpenUnavailableAssets,c=e.setDidOpenUnavailableAssets,a=e.isMobile,s=Object(R.useReducer)((function(e){return!e}),!1),i=Object(o.a)(s,2),u=i[0],l=i[1],f=Object(R.useState)(8),d=Object(o.a)(f,2),b=d[0],g=d[1];return Object(R.useEffect)((function(){if(b){var e=setInterval((function(){g(b-1)}),1e3);return function(){return clearInterval(e)}}n||(r(),c(!1))}),[b,r,n,c]),t&&0!==t.length?Object(x.jsxs)(w.b,{className:"rgw6ez2j3 rgw6ez22l rgw6ez4ir rgw6ez3n9 rgw6ez479 rgw6ez66p rgw6ez6fp rgw6ez4rr rgw6ez579 rgw6ez4y3 rgw6ez1al",children:[Object(x.jsxs)(w.c,{className:S,justifyContent:"space-between",children:["No longer available for sale",!n&&Object(x.jsxs)(w.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:function(){return r()},children:[Object(x.jsx)(T,{}),Object(x.jsx)(C.w,{})]})]}),1===t.length&&Object(x.jsx)(W,{asset:t[0],removeAsset:function(){},grayscale:!0,isMobile:a}),t.length>1&&Object(x.jsxs)(w.b,{children:[Object(x.jsxs)(w.c,{justifyContent:"space-between",marginBottom:u?"12":"0",cursor:"pointer",onClick:function(){!n&&c(!0),l()},children:[Object(x.jsxs)(w.c,{gap:"12",fontSize:"14",color:"textSecondary",fontWeight:"normal",style:{lineHeight:"20px"},children:[!u&&Object(x.jsx)(F,{assets:t.slice(0,5)}),"".concat(t.length," unavailable NFTs")]}),Object(x.jsx)(w.c,{color:"textSecondary",children:u?Object(x.jsx)(C.q,{}):Object(x.jsx)(C.o,{})})]}),Object(x.jsx)(w.b,{gap:"8",children:u&&t.map((function(e){return Object(x.jsx)(W,{asset:e,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})]}):null},M=r(544),D=(r(1876),function(e){var t=e.onClick,r=void 0===t?function(){return null}:t;return Object(x.jsx)(j.b,{className:"_199qdl71 rgw6ez393 rgw6ez2y3 rgw6ez14x rgw6ez1b3 rgw6ez42f rgw6ez3y9 rgw6ez4hr rgw6ez3k9",onClick:r})}),V=r(72),X=r(220),K=r(602),Q=r(1671),q=r(1672),J=r(1670),Y=r(1661),Z=r(867),$=function(e){return e.updatedPriceInfo?u.a.from(e.updatedPriceInfo.ETHPrice).sub(u.a.from(e.priceInfo.ETHPrice)):u.a.from(0)},ee=function(e,t){return $(e).gt($(t))?-1:1},te=r(351),re=r(99),ne=(r(1877),function(){return Object(x.jsx)(w.a,{height:"full",children:Object(x.jsxs)(w.b,{gap:"12",children:[Object(x.jsx)(w.a,{children:Object(x.jsx)(C.N,{color:V.c.colors.textTertiary})}),Object(x.jsxs)(w.b,{gap:"16",children:[Object(x.jsx)(w.a,{className:O.l,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(x.jsx)(w.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})})}),ce=function(e){var t=e.top,r=e.show;return Object(x.jsx)(j.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:r?"1":"0",transition:"250"})},ae=function(e){var t=e.numberOfAssets,r=e.toggleBag,n=e.resetFlow;return Object(x.jsxs)(w.b,{gap:"4",paddingX:"32",marginBottom:"20",children:[Object(x.jsxs)(w.c,{className:"_1jcz50r5 rgw6ezcf rgw6ezal rgw6ez6jp rgw6ez479 rgw6ez423",children:["My bag",Object(x.jsx)(j.b,{display:"flex",padding:"2",color:"textSecondary",cursor:"pointer",onClick:r,children:Object(x.jsx)(C.j,{})})]}),t>0&&Object(x.jsxs)(j.b,{fontSize:"14",fontWeight:"normal",style:{lineHeight:"20px"},color:"textPrimary",children:[Object(Y.b)(t,"NFT")," \xb7"," ",Object(x.jsx)(j.b,{as:"span",className:"_1jcz50r7 rgw6ez47l rgw6ez66d rgw6ezcl",onClick:function(){n()},children:"Clear all"})]})]})};t.default=function(){var e=Object(f.useWeb3React)().account,t=Object(X.d)((function(e){return e.bagStatus})),r=Object(X.d)((function(e){return e.setBagStatus})),n=Object(X.d)((function(e){return e.markAssetAsReviewed})),a=Object(X.d)((function(e){return e.didOpenUnavailableAssets})),b=Object(X.d)((function(e){return e.setDidOpenUnavailableAssets})),g=Object(X.d)((function(e){return e.isLocked})),j=Object(X.d)((function(e){return e.setLocked})),O=Object(X.d)((function(e){return e.reset})),m=Object(X.d)((function(e){return e.itemsInBag})),h=Object(X.d)((function(e){return e.setItemsInBag})),z=Object(X.d)((function(e){return e.removeAssetFromBag})),v=Object(X.d)((function(e){return e.bagExpanded})),E=Object(X.d)((function(e){return e.toggleBag})),N=Object(X.o)(),k=N.address,A=N.balance,y=N.provider,T=!!y&&!!k,C=Object(re.f)().pathname,P=C.startsWith("/nfts/sell"),_=C.startsWith("/nfts")&&!P,S=Object(X.g)(),H=Object(X.m)((function(e){return e.sendTransaction})),L=Object(X.m)((function(e){return e.state})),G=Object(X.m)((function(e){return e.setState})),F=Object(R.useRef)(L),V=Object(X.n)((function(e){return[e.setTransactionResponse]})),Y=Object(o.a)(V,1)[0],$=Object(te.useQueryClient)(),se=Object(R.useMemo)((function(){return Object(q.a)(m)}),[m]),ie=Object(R.useState)(!1),oe=Object(o.a)(ie,2),ue=oe[0],le=oe[1],fe=Object(R.useState)(!1),de=Object(o.a)(fe,2),be=de[0],ge=de[1],je=Object(R.useState)(0),we=Object(o.a)(je,2),Oe=we[0],pe=we[1],me=Object(te.useQuery)(["fetchPrice",{}],(function(){return Object(J.a)()}),{}).data,he=Object(R.useMemo)((function(){var e=se.reduce((function(e,t){return t.status!==p.c.UNAVAILABLE?e.add(u.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),u.a.from(0));return{totalEthPrice:e,totalUsdPrice:me?parseFloat(Object(l.formatEther)(e))*me:void 0}}),[se,me]),ze=he.totalEthPrice,xe=he.totalUsdPrice,ve=Object(R.useMemo)((function(){var e=Object(d.parseEther)(A.toString());return{balance:e,sufficientBalance:!T||u.a.from(e).gte(ze)}}),[A,ze,T]),Ie=ve.balance,Ee=ve.sufficientBalance,Ne=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,H(null===y||void 0===y?void 0:y.getSigner(),se.filter((function(e){return e.status!==p.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(r=e.sent)||F.current!==p.k.Success&&F.current!==p.k.Failed||(j(!1),le(!1),Y(r),v&&E(),O());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var t=Object(i.a)(s.a.mark((function t(){var n,i,o,l,f,d,w,O,m,z,x,v;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=se.filter((function(e){return e.status!==p.c.UNAVAILABLE})).map((function(e){return e.asset})),i=Object(Q.a)(n.reduce((function(e,t){return e.add(u.a.from(t.priceInfo.ETHPrice))}),u.a.from(0)).toString()),a&&b(!1),!g&&j(!0),r(p.d.FETCHING_ROUTE),t.prev=5,t.next=8,$.fetchQuery(["assetsRoute",i,n,e],(function(){return Object(K.h)({toSell:[i],toBuy:n,senderAddress:null!==e&&void 0!==e?e:""})}));case 8:o=t.sent,l=Object(Z.a)(n,o.route),f=l.filter((function(e){return e.updatedPriceInfo})).sort(ee),d=l.filter((function(e){return e.isUnavailable})),w=l.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),O=w.length>0,m=f.length>0,z=d.length>0,x=O||m||z,v=m||z,h([].concat(Object(c.a)(d.map((function(e){return{asset:e,status:p.c.UNAVAILABLE}}))),Object(c.a)(f.map((function(e){return{asset:e,status:p.c.REVIEWING_PRICE_CHANGE}}))),Object(c.a)(w.map((function(e){return{asset:e,status:p.c.REVIEWED}}))))),j(!1),x?v?r(m?p.d.IN_REVIEW:p.d.CONFIRM_REVIEW):(Ne(o),r(p.d.CONFIRMING_IN_WALLET)):r(p.d.ADDING_TO_BAG),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(5),r(p.d.ADDING_TO_BAG);case 26:case"end":return t.stop()}}),t,null,[[5,23]])})));return function(){return t.apply(this,arguments)}}();Object(R.useEffect)((function(){X.m.subscribe((function(e){return F.current=e.state}))}),[]);var Ae=Object(R.useMemo)((function(){return{unchangedAssets:se.filter((function(e){return e.status===p.c.ADDED_TO_BAG||e.status===p.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:se.filter((function(e){return e.status===p.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:se.filter((function(e){return e.status===p.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:se.filter((function(e){return e.status!==p.c.UNAVAILABLE}))}}),[se]),ye=Ae.unchangedAssets,Te=Ae.priceChangedAssets,Ce=Ae.unavailableAssets,Pe=Ae.availableItems;Object(R.useEffect)((function(){var e=Te.length>0,n=se.length>0;t!==p.d.IN_REVIEW||e||r(n?p.d.CONFIRM_REVIEW:p.d.ADDING_TO_BAG)}),[t,se,Te,r]),Object(R.useEffect)((function(){g&&!ue&&le(!0)}),[g,ue]),Object(R.useEffect)((function(){v&&E()}),[C]),Object(R.useEffect)((function(){F.current===p.k.Confirming&&r(p.d.PROCESSING_TRANSACTION),F.current!==p.k.Denied&&F.current!==p.k.Invalid||(F.current===p.k.Invalid?r(p.d.WARNING):r(p.d.CONFIRM_REVIEW),G(p.k.New),j(!1),le(!1))}),[F.current]);var Re=se.length>0||Ce.length>0;return Object(x.jsx)(x.Fragment,{children:v&&_?Object(x.jsxs)(M.a,{children:[Object(x.jsxs)(w.b,{className:"_1jcz50r1 rgw6ez42f rgw6ez393 rgw6ez3cy rgw6ez149 rgw6ez1al rgw6ez33l rgw6ez4fx rgw6ez479 rgw6ez2jf rgw6ez233 rgw6ez3lf rgw6ez3kg",children:[Object(x.jsx)(ae,{numberOfAssets:se.length,toggleBag:E,resetFlow:O}),0===se.length&&t===p.d.ADDING_TO_BAG&&Object(x.jsx)(ne,{}),Object(x.jsx)(ce,{top:!0,show:be&&Oe>0}),Object(x.jsxs)(w.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==be&&ge(t)}},className:"_1jcz50r3 rgw6ez28x rgw6ez2ef rgw6ez1tl rgw6ez6id",onScroll:function(e){var t=e.currentTarget.scrollTop,r=e.currentTarget.clientHeight,n=e.currentTarget.scrollHeight;pe(t?(t+r)/n*100:0)},gap:"12",children:[Object(x.jsxs)(w.b,{display:Te.length>0||Ce.length>0?"flex":"none",children:[Ce.length>0&&Object(x.jsx)(U,{assets:Ce,clearUnavailableAssets:function(){return h(Pe)},didOpenUnavailableAssets:a,setDidOpenUnavailableAssets:b,isMobile:S}),Te.map((function(e,t){return Object(x.jsx)(B,{asset:e,markAssetAsReviewed:n,top:0===t&&0===Ce.length,isMobile:S},e.id)}))]}),Object(x.jsx)(w.b,{gap:"8",children:ye.map((function(e){return Object(x.jsx)(W,{asset:e,removeAsset:z,showRemove:!0,isMobile:S},e.id)}))})]}),Object(x.jsx)(ce,{show:be&&Oe<100}),Re&&Object(x.jsx)(I,{balance:Ie,sufficientBalance:Ee,isConnected:T,totalEthPrice:ze,totalUsdPrice:xe,bagStatus:t,fetchAssets:ke,assetsAreInReview:se.some((function(e){return e.status===p.c.REVIEWING_PRICE_CHANGE}))})]}),ue&&Object(x.jsx)(D,{onClick:function(){return g?void 0:le(!1)}})]}):null})}}}]);
//# sourceMappingURL=9.60ae20cd.chunk.js.map